<div class="container-fluid">
  <div class="row row-under">
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-8">
      <h2><%= @task.task_name %> | <%= link_to Client.find(@task.client_id).client_name, client_path(@task.client_id) %> | <%= Client.find(@task.client_id).business_name %></h2>
    </div>
    <div class="col xs-12 col-sm-9 col-md-6 col-lg-4">
    <%= link_to "Task List", tasks_path, class: "btn btn-primary" %>
    <%= link_to "Edit Task", edit_task_path(@task), class: "btn btn-success" %>
    <%= link_to "Delete Task", task_path(@task), class: "btn btn-danger", method: :delete, data: { confirm: "Are you sure?"}  %>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Task Details</h3>
      </div>
      <div class="panel-body">
        <div class="col-md-8">
          <h5>Task Created Date:</h5>
          <h5>Task Created By:</h5>
          <h5>Task Frequency:</h5>
          <h5>Last Updated:</h5>
          <h5>Next Due Date:</h5>
          <h5>Currently Assigned To:</h5>
        </div>
        <div class="col-md-4">
          <h4><%= @task.created_at.strftime('%b  %d  %Y') %></h4>
          <h4>Nick Boyd</h4>
          <h4><%= @task.task_frequency %></h4>
          <h4><%= @task.updated_at.strftime('%b  %d  %Y') %></h4>
          <h4><%= @task.task_due.strftime('%b  %d  %Y') %></h4>
          <h4><%= @task.task_assigned_to %></h4>
          <h2>&nbsp</h2>
        </div>
        <div class="text-center">  
          <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
            Update Task
          </button>
        </div>
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title" id="myModalLabel">Update Task</h3>
              </div>
              <div class="modal-body">
                <%= render 'update_task_form' %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>    
  </div>
  <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Task Notes</h3>
      </div>
      <div class="panel-body">
        <table class="table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Created By</th>
              <th>Note Details</th>
     
            </tr>
          </thead>
          <tbody>
            <% @task.note_association.each do |note| %>
            <tr>
              <td class="col-md-2"><%= note.note_date.strftime('%b  %d  %Y') %> </td>
              <td class="col-md-2"><%= note.note_owner %></td>
              <td><%= note.note_contents %></td>
            </tr>
            <% end %>
          </tbody>
        </table>
      <%= link_to "New Note", new_note_path, class: "btn btn-primary" %>
      </div>
    </div>
  </div>
</div>

